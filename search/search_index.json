{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Crypto-QA \u4f7f\u7528\u8005\u64cd\u4f5c\u624b\u518a (User Manual)","text":"<p>\u672c\u624b\u518a\u5206\u70ba\u5169\u5927\u90e8\u5206\uff1a</p> <ol> <li>\u4ea4\u6613\u54e1\u6307\u5357 (Trader's Guide)\uff1a\u91dd\u5c0d\u7b56\u7565\u958b\u767c\u3001\u56de\u6e2c\u8207\u65e5\u5e38\u76e3\u63a7\u7684\u64cd\u4f5c\u3002</li> <li>\u7ba1\u7406\u54e1\u6307\u5357 (Admin's Guide)\uff1a\u91dd\u5c0d\u7cfb\u7d71\u8a2d\u5b9a\u3001\u6578\u64da\u7dad\u8b77\u8207\u74b0\u5883\u90e8\u7f72\u7684\u64cd\u4f5c\u3002</li> </ol> <p>\u76ee\u524d\u6240\u6709\u529f\u80fd\u90fd\u5c1a\u672a\u6210\u719f\uff0c\u4e5f\u5e0c\u671b\u5728\u958b\u767c\u7684\u540c\u6642\u4e00\u908a\u6709\u5be6\u969b\u9032\u5ea6\u548c\u529f\u80fd\u8a0e\u8ad6\u7684\u4ea4\u6d41\u3002</p>"},{"location":"#0-login-access","title":"0. \u767b\u5165\u8207\u6b0a\u9650 (Login &amp; Access)","text":"<p>\u8def\u5f91: <code>/login</code></p> <p>\u7cfb\u7d71\u4f9d\u64da\u5e33\u865f\u6b0a\u9650\u5206\u70ba\u5169\u7a2e\u89d2\u8272\uff1a</p> <ul> <li>Trader: \u50c5\u53ef\u5b58\u53d6 Dashboard\u3001\u56de\u6e2c\u8207\u5373\u6642\u76e3\u63a7\u529f\u80fd\u3002</li> <li>Admin: \u64c1\u6709\u6240\u6709\u6b0a\u9650\uff0c\u5305\u542b\u7cfb\u7d71\u8a2d\u5b9a (<code>/settings</code>) \u8207\u8cc7\u6599\u6e90\u7ba1\u7406 (<code>/data-manager</code>)\u3002</li> </ul> <p>\u6ce8\u610f: \u82e5\u60a8\u767b\u5165\u5f8c\u767c\u73fe\u5074\u908a\u6b04\u7f3a\u5c11\u90e8\u5206\u529f\u80fd\uff0c\u8acb\u78ba\u8a8d\u60a8\u7684\u5e33\u865f\u662f\u5426\u5177\u5099 Admin \u6b0a\u9650\u3002</p>"},{"location":"#part-1-traders-guide","title":"Part 1: \u4ea4\u6613\u54e1\u6307\u5357 (Trader's Guide)","text":"<p>\u6b64\u5340\u584a\u8aaa\u660e\u5982\u4f55\u4f7f\u7528\u5e73\u53f0\u9032\u884c\u5e02\u5834\u5206\u6790\u3001\u56de\u6e2c\u8207\u7b56\u7565\u57f7\u884c\u3002</p>"},{"location":"#1-dashboard","title":"1. \u5100\u8868\u677f (Dashboard)","text":"<p>\u8def\u5f91: <code>/</code> (\u9996\u9801)</p> <ul> <li>\u7e3d\u89bd: \u986f\u793a\u76ee\u524d\u5e33\u6236\u6b0a\u76ca\u3001\u6d3b\u8e8d\u7b56\u7565\u6578\u91cf\u8207\u640d\u76ca\u72c0\u614b\u3002</li> <li>\u5c0e\u822a: \u9ede\u64ca\u5de6\u4e0a\u89d2\u5716\u793a\u53ef\u6536\u5408\u5074\u908a\u6b04 (Sidebar)\uff0c\u63d0\u4f9b\u66f4\u5927\u7684\u5716\u8868\u6aa2\u8996\u7a7a\u9593\u3002</li> </ul>"},{"location":"#2-analysis-backtest","title":"2. \u91cf\u5316\u5206\u6790 (Analysis &amp; Backtest) (\u958b\u767c\u4e2d)","text":"<p>\u8def\u5f91: <code>/backtest</code></p> <ul> <li>\u529f\u80fd: \u900f\u904e\u6b77\u53f2\u6578\u64da\u9a57\u8b49\u4ea4\u6613\u7b56\u7565\u7684\u6b77\u53f2\u8868\u73fe\u3002</li> <li> <p>\u64cd\u4f5c\u6b65\u9a5f:</p> </li> <li> <p>\u9078\u64c7\u6a19\u7684: \u8a2d\u5b9a\u4ea4\u6613\u6240 (Exchange) \u8207\u4ea4\u6613\u5c0d (Symbol)\u3002</p> </li> <li>\u8a2d\u5b9a\u9031\u671f: \u9078\u64c7 Timeframe (\u5982 1h, 15m)\u3002</li> <li>\u7b56\u7565\u53c3\u6578: \u8abf\u6574\u53f3\u5074\u9762\u677f\u7684\u7b56\u7565\u53c3\u6578 (Parameters)\u3002</li> <li>\u57f7\u884c\u56de\u6e2c: \u9ede\u64ca \"Run Backtest\" \u7cfb\u7d71\u5c07\u8a08\u7b97\u6b0a\u76ca\u66f2\u7dda (Equity Curve)\u3001\u6700\u5927\u56de\u64a4 (MOD) \u8207\u590f\u666e\u6bd4\u7387\u3002</li> </ul>"},{"location":"#3-live-monitor","title":"3. \u5373\u6642\u76e3\u63a7 (Live Monitor)","text":"<p>\u8def\u5f91: <code>/monitor</code> (\u76ee\u524d\u7248\u672c\u5c1a\u672a\u958b\u653e)</p> <ul> <li>\u529f\u80fd: \u67e5\u770b\u5be6\u76e4\u904b\u884c\u7684\u7b56\u7565\u72c0\u614b\u3001\u5373\u6642\u4fe1\u865f\u89f8\u767c\u8207\u8a02\u55ae\u57f7\u884c\u72c0\u6cc1\u3002</li> </ul>"},{"location":"#part-2-admins-guide","title":"Part 2: \u7ba1\u7406\u54e1\u6307\u5357 (Admin's Guide)","text":"<p>\u6b64\u5340\u584a\u8aaa\u660e\u7cfb\u7d71\u53c3\u6578\u914d\u7f6e\u3001\u6578\u64da\u6e90\u7ba1\u7406\u8207\u6545\u969c\u6392\u9664\uff0c\u50c5\u9650\u7ba1\u7406\u54e1\u6b0a\u9650\u5b58\u53d6\u3002</p>"},{"location":"#1-system-settings","title":"1. \u7cfb\u7d71\u53c3\u6578\u8a2d\u5b9a (System Settings)","text":"<p>\u8def\u5f91: <code>/settings</code> \u6b0a\u9650: \u50c5\u9650\u7ba1\u7406\u54e1</p> <p>\u6b64\u9801\u9762\u63a7\u5236\u7cfb\u7d71\u7684\u5168\u57df\u884c\u70ba\u3002\u4fee\u6539\u5f8c\u7684\u8a2d\u5b9a\u901a\u5e38\u6703\u7acb\u5373\u751f\u6548\uff0c\u4e26\u8a18\u9304\u4fee\u6539\u8005\u8207\u6642\u9593\u3002</p> Key \u8aaa\u660e \u7bc4\u4f8b\u503c <code>site.name</code> \u7db2\u7ad9\u986f\u793a\u540d\u7a31 \"Crypto-QA\" <code>market.data.retention_days</code> Parquet \u71b1\u6578\u64da\u4fdd\u7559\u5929\u6578 <code>90</code> <code>trade.risk.max_drawdown</code> \u6bcf\u65e5\u6700\u5927\u8667\u640d\u9650\u5236 (Kill Switch) <code>0.05</code> (5%) <code>system.maintenance_mode</code> \u82e5\u8a2d\u70ba true\uff0c\u5c07\u505c\u6b62\u6240\u6709\u81ea\u52d5\u4e0b\u55ae <code>false</code>"},{"location":"#2-data-manager","title":"2. \u8cc7\u6599\u6e90\u7ba1\u7406 (Data Manager)","text":"<p>\u8def\u5f91: <code>/data-manager</code></p> <ul> <li>\u4ea4\u6613\u6240\u4e32\u63a5 (Exchange Integration)</li> <li>\u65b0\u589e: \u5728\u6b64\u8f38\u5165 API Key / Secret (\u7cfb\u7d71\u63a1\u52a0\u5bc6\u5132\u5b58)\u3002</li> <li> <p>\u6e2c\u8a66: \u9ede\u64ca \"Test Connection\" \u78ba\u8a8d\u9023\u7dda\u72c0\u614b\u8207\u6b0a\u9650\u3002</p> </li> <li> <p>\u6b77\u53f2\u6578\u64da\u540c\u6b65 (History Sync)</p> </li> <li>\u4f7f\u7528\u8005\u53ef\u65bc Data Manager \u9078\u64c7\u4ea4\u6613\u5c0d\u8207\u6642\u9593\u7bc4\u570d\uff0c\u89f8\u767c\u5f8c\u7aef\u4e0b\u8f09\u4efb\u52d9\u3002</li> <li> <p>\u7cfb\u7d71\u652f\u63f4\u52fe\u9078\u300c\u4fdd\u7559\u539f\u59cb\u6a94\u300d\uff0c\u4ee5\u5229\u672a\u4f86\u8cc7\u6599\u6821\u6b63\u3002</p> </li> <li> <p>\u6578\u64da\u7dad\u8b77 (Data Maintenance)</p> </li> <li>\u624b\u52d5\u540c\u6b65: \u7576\u81ea\u52d5\u6392\u7a0b (Cron) \u5931\u6557\u6642\uff0c\u53ef\u5728\u6b64\u624b\u52d5\u89f8\u767c <code>Sync</code> \u4efb\u52d9\u88dc K \u7dda\u8cc7\u6599\u3002</li> <li>\u5b8c\u6574\u6027\u6aa2\u67e5: \u6aa2\u8996\u672c\u5730\u6578\u64da\u6e56 (Parquet) \u662f\u5426\u6709\u7f3a\u6f0f\u3002</li> </ul>"},{"location":"#3-troubleshooting","title":"3. \u6545\u969c\u6392\u9664 (Troubleshooting)","text":"<ul> <li>API \u9023\u7dda\u5931\u6557 (\"Network Error\")</li> <li>\u78ba\u8a8d\u5f8c\u7aef\u670d\u52d9\u662f\u5426\u904b\u884c\u6b63\u5e38\u3002</li> <li>\u6aa2\u67e5\u700f\u89bd\u5668 Console \u662f\u5426\u6709 CORS \u76f8\u95dc\u932f\u8aa4\u3002</li> <li> <p>\u78ba\u8a8d\u74b0\u5883\u8b8a\u6578\u5728 <code>.env</code> \u4e2d\u7684 <code>PUBLIC_API_URL</code> \u8a2d\u5b9a\u6b63\u78ba\u3002</p> </li> <li> <p>\u986f\u793a\u7570\u5e38: \u5617\u8a66\u6e05\u9664\u700f\u89bd\u5668\u5feb\u53d6\u6216\u91cd\u65b0\u6574\u7406\u9801\u9762\u3002</p> </li> </ul>"},{"location":"API/","title":"\ud83d\udd0c API design","text":"<p>\u6240\u6709 API \u5747\u57fa\u65bc Django Ninja\uff0c\u9810\u8a2d\u524d\u7db4\u70ba <code>/api</code></p>"},{"location":"API/#ai-development-constraints-ai","title":"\u26a0\ufe0f AI Development Constraints (AI \u958b\u767c\u9650\u5236)","text":"<p>[IMPORTANT]</p> <ul> <li>All REST API endpoints MUST use the <code>ApiResponse[T] wrapper defined in</code>backend.core.schemas`.<ol> <li>\u2705 Correct: <code>def get_item(...) -&gt; ApiResponse[ItemSchema]:</code></li> <li>\u274c Incorrect: <code>def get_item(...) -&gt; ItemSchema:</code></li> </ol> </li> <li>Error Handling:<ol> <li>Use <code>django.shortcuts.get_object_or_404</code>.</li> <li>For business logic errors, return `ApiResponse(code=-1, message=\"...\") instead of raising 500 exceptions.</li> </ol> </li> </ul>"},{"location":"API/#envelope-pattern","title":"\u7d71\u4e00\u56de\u61c9\u683c\u5f0f (Envelope Pattern)","text":"<p>\u70ba\u4e86\u524d\u5f8c\u7aef\u4e32\u63a5\u7684\u4e00\u81f4\u6027\uff0c\u6240\u6709 API (\u9664\u7279\u5b9a\u4e8c\u9032\u4f4d\u6d41\u6216\u975e\u6a19\u6e96\u4ecb\u9762) \u7686\u63a1\u7528\u4ee5\u4e0b JSON \u7d50\u69cb\uff1a</p> <pre><code>{\n    \"code\": 0,              // 0: \u6210\u529f, -1: \u932f\u8aa4, &gt;0: \u5176\u4ed6\u932f\u8aa4\u4ee3\u78bc\n    \"message\": \"success\",   // \u4eba\u985e\u53ef\u8b80\u8a0a\u606f\n    \"data\": { ... }         // \u5be6\u969b\u8cc7\u6599 payload\n}\n</code></pre> <p>\u4ee5\u4e0b\u5b9a\u7fa9\u6838\u5fc3\u7684 Request/Response Schema</p>"},{"location":"API/#core-schema","title":"Core Schema","text":"<pre><code>class ApiResponse(Schema, Generic[T]):\n    code: int = 0               # 0: \u6210\u529f, -1: \u932f\u8aa4, &gt;0: \u7279\u5b9a\u932f\u8aa4\u4ee3\u78bc\n    message: str = \"success\"\n    data: Optional[T] = None\n</code></pre>"},{"location":"API/#0-authentication","title":"0. Authentication (\u8eab\u4efd\u9a57\u8b49)","text":"<p>\u7cfb\u7d71\u63a1\u7528 JWT (JSON Web Token) \u9032\u884c\u9a57\u8b49\u3002</p> Method Endpoint \u529f\u80fd\u8aaa\u660e Body POST <code>/auth/token</code> \u767b\u5165\u4e26\u7372\u53d6 Access/Refresh Token <code>{username, password}</code> POST <code>/auth/token/refresh</code> \u5237\u65b0 Access Token <code>{refresh}</code> GET <code>/auth/me</code> \u7372\u53d6\u7576\u524d\u767b\u5165\u8005\u8cc7\u8a0a\u8207\u6b0a\u9650\u7fa4\u7d44 -"},{"location":"API/#1-system-config","title":"1. System Config (\u7cfb\u7d71\u8a2d\u5b9a)","text":"<p>\u5b9a\u7fa9\u65bc <code>backend/apps/system/api.py</code>\u3002 \u8ca0\u8cac\u672c\u7cfb\u7d71\u76f8\u95dc\u8a2d\u7f6e</p> <ul> <li>\u521d\u59cb\u5316: \u7cfb\u7d71\u555f\u52d5\u6642\u6703\u900f\u904e <code>seed_settings</code> \u6307\u4ee4\u81ea\u52d5\u5beb\u5165\u9810\u8a2d\u503c\u3002</li> </ul> Method Endpoint \u529f\u80fd\u8aaa\u660e Body / Query \u72c0\u614b GET <code>/sys/health</code> \u7cfb\u7d71\u5065\u5eb7\u6aa2\u67e5\u3002 docker Healthcheck \u7528 \u2705 \u5b8c\u6210 GET <code>/sys/info</code> \u7cfb\u7d71\u8cc7\u6e90\u72c0\u614b (CPU, Memory, Disk) - \u23f3 \u672a\u958b\u59cb GET <code>/sys/settings</code> \u5217\u51fa\u7cfb\u7d71\u6240\u6709\u8a2d\u5b9a\u3002 - \u2705 \u5b8c\u6210 GET <code>/sys/settings/{key}</code> \u7372\u53d6\u55ae\u4e00\u8a2d\u5b9a\u8a73\u60c5\u3002 - \u2705 \u5b8c\u6210 PUT <code>/sys/settings/{key}</code> \u66f4\u65b0\u7cfb\u7d71\u8a2d\u5b9a\u3002 <code>SystemSettingUpdateSchema</code> \u2705 \u5b8c\u6210"},{"location":"API/#system-schemas","title":"System Schemas","text":"<pre><code># Update Request (Input)\nclass SystemSettingUpdateSchema(Schema):\n    value: Any                  # \u5141\u8a31\u4e0d\u540c\u578b\u614b (int, str, bool, dict)\uff0c\u5f8c\u7aef\u9700\u505a\u9a57\u8b49\n    description: Optional[str] = None\n\n# Response Object (Output)\nclass SystemSettingOut(Schema):\n    key: str\n    value: Any                          # \u4e0d\u540c key \u7684\u7d50\u69cb\u53ef\u80fd\u4e0d\u540c\n    description: str\n    updated_at: datetime\n    updated_by: Optional[str] = None    # \u56de\u50b3 Username \u6216 User ID\n\nclass SystemSettingResponse(ApiSchema[SystemSettingOut]):\n    pass\n\nclass SystemSettingListResponse(ApiSchema[list[SystemSettingOut]]):\n    pass\n</code></pre>"},{"location":"API/#2-market-data","title":"2. Market Data (\u5e02\u5834\u6578\u64da)","text":"<p>\u5b9a\u7fa9\u65bc <code>backend/apps/market_data/api.py</code>\u3002 \u8ca0\u8cac\u6578\u64da\u6e05\u6d17\u3001\u5132\u5b58\u8207\u8b80\u53d6 (Parquet)\u3002</p> Method Endpoint \u529f\u80fd\u8aaa\u660e Body / Query \u72c0\u614b GET <code>/mkt/sources</code> \u7372\u53d6\u652f\u63f4\u7684\u4ea4\u6613\u6240\u5217\u8868 - \u2705 \u5b8c\u6210 GET <code>/mkt/sources/discover</code> \u5217\u51faCCXT\u53ef\u7528\u7684\u4ea4\u6613\u6240 - \u2705 \u5b8c\u6210 POST <code>/mkt/sources/{exchange_id}/enable</code> \u555f\u7528\u4ea4\u6613\u6240\u8cc7\u6599 - \ud83d\udea7 \u9032\u884c\u4e2d GET <code>/mkt/test-connection</code> \u6e2c\u8a66\u9023\u7dda - \u2705 \u5b8c\u6210 GET <code>/mkt/symbols</code> \u641c\u5c0b/\u5217\u51fa\u4ea4\u6613\u6240\u7684\u4ea4\u6613\u5c0d <code>?exchange=binance&amp;q=BTC</code> \ud83d\udea7 \u9032\u884c\u4e2d POST <code>/mkt/track</code> \u5c07\u4ea4\u6613\u5c0d\u52a0\u5165\u672c\u5730\u8ffd\u8e64\u6e05\u55ae (\u5b58\u5165 DB) <code>{ \"symbol\": \"BTC/USDT\", \"source\": \"binance\" }</code> \u23f3 \u672a\u958b\u59cb GET <code>/mkt/tracked</code> \u7372\u53d6\u76ee\u524d\u5df2\u8ffd\u8e64\u7684\u4ea4\u6613\u5c0d\u72c0\u614b (\u6578\u64da\u5b8c\u6574\u6027) - \u23f3 \u672a\u958b\u59cb GET <code>/mkt/candles</code> \u3010\u6838\u5fc3\u3011 \u8b80\u53d6 K \u7dda\u6578\u64da (\u4f9b\u524d\u7aef\u7e6a\u5716) <code>?symbol=BTC/USDT&amp;tf=1h&amp;start=...&amp;end=...</code> \u23f3 \u672a\u958b\u59cb GET <code>/mkt/sync-test</code> \u89f8\u767c\u4e0b\u8f09\u4e26\u5b58\u6a94 - \ud83d\udea7 \u9032\u884c\u4e2d POST <code>/mkt/sync</code> \u89f8\u767c\u624b\u52d5\u6578\u64da\u88dc\u5168\u4efb\u52d9 <code>SyncRequest</code> \ud83d\udea7 \u9032\u884c\u4e2d POST <code>/mkt//sync/history</code> \u4e0b\u8f09\u6b77\u53f2\u6578\u64da <code>HistorySyncRequest</code> \ud83d\udea7 \u9032\u884c\u4e2d"},{"location":"API/#market-data-schemas","title":"Market Data Schemas","text":"<pre><code># -- Input Schemas\nclass SyncRequest(Schema):\n    source: str = \"binance\"\n    symbol: str = \"BTC/USDT\"\n    market_type: str = \"spot\"\n    timeframe: str = \"1d\"\n    days: int = 30\n\nclass HistorySyncRequest(Schema):\n    symbol: str = \"BTCUSDT\"\n    market_type: str = \"spot\"   # spot, um (usdt-m future)\n    timeframe: str = \"1h\"\n    start_year: int = 2020\n    end_year: int = 2023\n    months: list[int] = []      # \u82e5\u70ba\u7a7a\u5247\u4e0b\u8f09\u6574\u5e74\n    keep_raw: bool = True       # \u662f\u5426\u4fdd\u7559\u539f\u59cb\u6a94\n    asset_class: str = \"crypto\" # \u9810\u7559 TradFi \u6b04\u4f4d\n\n# --- Output Schemas (Data Payload)\n\nclass ExchangeOut(Schema):\n    id: str         # \"binance\"\n    name: str       # \"Binance \u5e63\u5b89\"\n    supported_market_types: list[str]   # [\"spot\", \"usdt_futures\"]\n    is_active: bool\n\nclass ExchangeListResponse(ApiResponse[list[ExchangeOut]]):\n    pass\n\nclass DiscoveryOut(Schema):\n    id: str\n    name: str\n    has_ohlcv: bool\n    in_system: bool\n\nclass DiscoveryResponse(ApiResponse[list[DiscoveryOut]]):\n    pass\n\nclass SymbolOut(Schema):\n    id: int             # \u5c0d\u61c9 Symbol \u7684\u81ea\u52d5 id\n    name: str           # \u5c0d\u61c9 Symbol.name\n    exchange_id: str    # Django Ninja \u53ef\u81ea\u52d5\u5c0d\u61c9\u5230 s.exchange_id\n\n    # \u539f\u672c\u7684 market_type\n    market_type: str\n\nclass SymbolResponse(ApiResponse[SymbolOut]):\n    pass\n\nclass TestConnectionOut(Schema):\n    exchange: str\n    url_used: str\n    symbols_count: int\n    symbols_sample: list[Any]\n\nclass SyncTestOut(Schema):\n    symbol: str\n    rows: int\n    path: str\n\nclass SyncJobOut(Schema):\n    task_id: str | None = None\n    status: str\n    details: Any = None\n</code></pre>"},{"location":"API/#3-analysis","title":"3. Analysis (\u91cf\u5316\u5206\u6790\u8207\u56de\u6e2c)","text":"<p>\u5b9a\u7fa9\u65bc <code>backend/apps/analysis/api.py</code>\u3002 \u8ca0\u8cac\u6280\u8853\u6307\u6a19\u8a08\u7b97\u8207\u7b56\u7565\u56de\u6e2c\u3002</p> Method Endpoint \u529f\u80fd\u8aaa\u660e Body / Query \u72c0\u614b GET <code>/ana/indicators</code> \u7372\u53d6\u7cfb\u7d71\u652f\u63f4\u7684\u6280\u8853\u6307\u6a19\u6e05\u55ae (\u5982 MA, RSI) - \u23f3 \u672a\u958b\u59cb POST <code>/ana/preview</code> \u5feb\u901f\u8a08\u7b97\u6307\u6a19\u4e26\u56de\u50b3 (\u4e0d\u5b58 DB\uff0c\u524d\u7aef\u9810\u89bd\u7528) <code>{ \"symbol\": \"BTC/USDT\", \"indicators\": [...] }</code> \u23f3 \u672a\u958b\u59cb POST <code>/ana/backtest/run</code> \u3010\u6838\u5fc3\u3011 \u63d0\u4ea4\u56de\u6e2c\u4efb\u52d9 <code>BacktestConfigSchema</code> \u23f3 \u672a\u958b\u59cb GET <code>/ana/backtest/{id}</code> \u67e5\u8a62\u56de\u6e2c\u72c0\u614b\u8207\u7c21\u6613\u7d50\u679c - \u23f3 \u672a\u958b\u59cb GET <code>/ana/backtest/{id}/result</code> \u7372\u53d6\u8a73\u7d30\u56de\u6e2c\u5831\u544a (\u6b0a\u76ca\u66f2\u7dda\u3001\u4ea4\u6613\u660e\u7d30) - \u23f3 \u672a\u958b\u59cb"},{"location":"API/#analysis-schemas","title":"Analysis Schemas","text":"<pre><code># \u56de\u6e2c\u8a2d\u5b9a\nclass BacktestConfigSchema(Schema):\n    strategy_name: str       # \u4f8b\u5982 \"RsiStrategy\"\n    symbol: str              # \"ETH/USDT\"\n    timeframe: str           # \"15m\"\n    start_time: datetime\n    end_time: datetime\n    initial_capital: float   # \u521d\u59cb\u8cc7\u91d1\n    params: Dict[str, Any]   # \u7b56\u7565\u53c3\u6578 e.g. {\"rsi_period\": 14, \"overbought\": 70}\n\n# \u56de\u6e2c\u7d50\u679c\u6458\u8981\nclass BacktestResultSchema(Schema):\n    id: str\n    status: str              # \"pending\", \"running\", \"completed\", \"failed\"\n    total_return: float      # \u7e3d\u5831\u916c\u7387 %\n    max_drawdown: float      # \u6700\u5927\u56de\u64a4 %\n    win_rate: float          # \u52dd\u7387\n    total_trades: int        # \u7e3d\u4ea4\u6613\u6b21\u6578\n</code></pre>"},{"location":"API/#4-trading","title":"4. Trading (\u5be6\u76e4/\u6a21\u64ec\u4ea4\u6613)","text":"<p>\u5b9a\u7fa9\u65bc <code>backend/apps/trading/api.py</code>\u3002\u8ca0\u8cac\u5c0d\u63a5\u4ea4\u6613\u6240 API \u9032\u884c\u4e0b\u55ae\u8207\u5e33\u6236\u7ba1\u7406\u3002</p> Method Endpoint \u529f\u80fd\u8aaa\u660e Body / Query \u72c0\u614b GET <code>/trade/accounts</code> \u7372\u53d6\u4ea4\u6613\u6240\u5e33\u6236\u9918\u984d\u8207\u6b0a\u76ca <code>?exchange=binance</code> \u23f3 \u672a\u958b\u59cb GET <code>/trade/positions</code> \u7372\u53d6\u7576\u524d\u6301\u5009 (Positions) - \u23f3 \u672a\u958b\u59cb POST <code>/trade/order</code> \u767c\u9001\u4e0b\u55ae\u8acb\u6c42 (\u5e02\u50f9/\u9650\u50f9) <code>OrderCreateSchema</code> \u23f3 \u672a\u958b\u59cb DELETE <code>/trade/order/{id}</code> \u53d6\u6d88\u8a02\u55ae - \u23f3 \u672a\u958b\u59cb GET <code>/trade/history</code> \u7372\u53d6\u6b77\u53f2\u6210\u4ea4\u7d00\u9304 <code>?limit=50</code> \u23f3 \u672a\u958b\u59cb"},{"location":"API/#trading-schemas","title":"Trading Schemas","text":"<pre><code># \u4e0b\u55ae\u8acb\u6c42\nclass OrderCreateSchema(Schema):\n    symbol: str\n    side: str                # \"buy\" or \"sell\"\n    type: str                # \"limit\" or \"market\"\n    quantity: float\n    price: Optional[float]   # \u5e02\u50f9\u55ae\u53ef\u70ba None\n    leverage: int = 1        # \u69d3\u687f\u500d\u6578\n</code></pre>"},{"location":"ROADMAP/","title":"\u767c\u5c55\u8a08\u5283","text":"<p>\u6b64\u5c08\u6848\u6700\u7d42\u76ee\u6a19\u70ba\u81ea\u52d5\u4ea4\u6613\u7cfb\u7d71\uff0c\u4f9d\u64da\u4f7f\u7528\u8005\u6240\u8a02\u5b9a\u7684\u7b56\u7565\uff0c\u4e26\u5e0c\u671b\u5c0d\u65bc\u76ee\u524d\u6240\u6709\u7684\u91d1\u878d\u5546\u54c1 (\u5305\u62ec\u50b3\u7d71\u4ea4\u6613\u7cfb\u7d71)\uff0c\u53ef\u4ee5\u900f\u904e\u6b64\u7cfb\u7d71\u505a\u500b\u4eba\u8a2d\u5b9a\uff0c\u4e26\u9032\u4e00\u6b65\u76f4\u63a5\u9032\u884c\u4ea4\u6613\u3002</p> <p>\u6280\u8853\u67b6\u69cb\u8aaa\u660e: \u8a73\u7d30\u7684\u6280\u8853\u63a8\u758a\u3001\u76ee\u9304\u7d50\u69cb\u8207\u958b\u767c\u898f\u7bc4\uff0c\u8acb\u53c3\u95b1\u5167\u90e8\u6587\u4ef6\u300c DEVELOPMENT.md\u300d\u3002</p>"},{"location":"ROADMAP/#milestones","title":"\u968e\u6bb5\u898f\u5283 Milestones","text":"<p>\u4f9d\u6b64\u767c\u5c55\u9806\u5e8f\uff0c\u9010\u6b65\u5b8c\u6210\u7cfb\u7d71\uff0c\u5f9e\u52a0\u5bc6\u8ca8\u5e63\u91cf\u5316\u5206\u6790\u958b\u59cb\uff0c\u5b8c\u6210\u5f8c\uff0c\u518d\u52a0\u5165\u50b3\u7d71\u91d1\u878d\u5546\u54c1\u7684\u4ea4\u6613\u3002</p>"},{"location":"ROADMAP/#phase-1-data-infrastructure","title":"Phase 1: \u6578\u64da\u57fa\u790e\u5efa\u8a2d (Data Infrastructure)","text":"<p>\u76ee\u6a19\uff1a\u5efa\u7acb\u53ef\u9760\u7684\u672c\u5730\u6578\u64da\u6c60\uff0c\u4e26\u80fd\u5728\u524d\u7aef\u8996\u89ba\u5316\u3002\u91cd\u9ede\u5728\u65bc <code>market_data</code> \u6a21\u7d44\u5be6\u4f5c\u3002</p> <p>[AI \u63d0\u793a / AI Instructions] \u6b64\u968e\u6bb5\u4efb\u52d9\u63a1\u300c\u5782\u76f4\u5207\u7247\u300d\u6a21\u5f0f\uff0c\u9700\u914d\u5408 <code>frontend/src/routers/data-manager</code> \u4ecb\u9762\u540c\u6b65\u958b\u767c\u3002</p> <ul> <li>[x] \u6587\u6a94\u4e2d\u5fc3\u5efa\u8a2d (Documentation):</li> <li>[x] \u90e8\u7f72 MkDocs \u81f3 GitHub Pages Crypto-QA Documentation\u3002</li> <li> <p>[x] API \u6587\u4ef6\u62bd\u96e2: \u5c07 API \u898f\u683c\u5f9e README \u79fb\u81f3\u7368\u7acb MkDocs \u5c08\u6848\uff0c\u4ee5\u4fbf\u65bc\u7dad\u8b77\u8207\u516c\u958b\u67e5\u95b1\u3002</p> <ul> <li>[x] \u5206\u96e2 User Manual \u8207 Developer Guide\u3002</li> </ul> </li> <li> <p>[ ] \u7cfb\u7d71\u57fa\u790e\u8a2d\u5b9a (System Config):</p> </li> <li>[x] \u5efa\u7acb <code>SystemSetting</code> Model (\u5305\u542b audit \u6b04\u4f4d: updated_by)\u3002</li> <li>[x] API \u4ecb\u9762\u6a19\u6e96\u5316 CRUD API \u7d71\u4e00\u56de\u61c9\u683c\u5f0f (<code>ApiResponse&lt;T&gt;</code>)\u3002</li> <li>[ ] Slice 1 (UI): \u524d\u7aef\u8a2d\u5b9a\u9801\u9762 (<code>/settings</code>) UI \u6574\u5408\u8207\u6e2c\u8a66\u3002</li> <li> <p>[ ] Slice 2 (Logic): \u5b8c\u6210 <code>ParquetConfigSchema</code> \u9a57\u8b49\u908f\u8f2f\u3002</p> </li> <li> <p>[ ] \u4ea4\u6613\u6240\u9069\u914d (Exchange Adaptor):</p> </li> <li>[x] <code>BaseExchangeClient</code> \u4ecb\u9762\u5b9a\u7fa9\u3002</li> <li>[x] <code>BinanceClient</code> \u57fa\u790e\u9023\u7dda\u8207\u8a2d\u5b9a (\u4f7f\u7528 CCXT)\u3002</li> <li>[x] \u5be6\u4f5c\u9023\u7dda\u6e2c\u8a66 API (/mkt/test-connection) \u8207\u5e02\u5834\u5217\u8868 (/mkt/sources)\u3002</li> <li> <p>[ ] \u652f\u63f4 OKX/Coinbase \u7684\u9069\u914d\u5668\u3002</p> </li> <li> <p>[ ] \u6b77\u53f2\u6578\u64da\u540c\u6b65\u529f\u80fd (History Sync Feature):</p> </li> <li>[ ] Slice 1 (UI): \u5efa\u7acb\u300c\u8cc7\u6599\u6e90\u7ba1\u7406\u300d\u9801\u9762\uff0c\u5305\u542b\u65e5\u671f\u9078\u64c7\u8207\u300c\u4fdd\u7559\u539f\u59cb\u6a94 (Raw Data)\u300d\u958b\u95dc\u3002</li> <li>[ ] Slice 2 (API): \u5be6\u4f5c <code>POST /mkt/sync/history</code> \u63a5\u6536\u524d\u7aef\u53c3\u6578 (\u5305\u542b <code>keep_raw</code> \u8a2d\u5b9a)\u3002</li> <li>[ ] Slice 3 (Logic): \u5be6\u4f5c <code>BinanceClient</code> \u4e0b\u8f09\u908f\u8f2f\uff0c\u4e26\u6574\u5408 Hive Parquet \u5beb\u5165\u908f\u8f2f\u3002</li> <li> <p>[ ] Slice 4 (Feedback): \u5be6\u4f5c\u6a94\u6848\u72c0\u614b\u6aa2\u67e5 API\uff0c\u8b93\u524d\u7aef\u986f\u793a\u300c\u5df2\u4e0b\u8f09/\u5df2\u540c\u6b65\u300d\u3002</p> </li> <li> <p>[ ] K \u7dda\u5716\u8868\u6aa2\u8996\u529f\u80fd (Candlestick Viewer Feature):</p> </li> <li>[ ] Slice 1 (UI): \u5728 <code>data-manager/market/[symbol]</code> \u9801\u9762\u6574\u5408 Lightweight Charts\u3002</li> <li>[ ] Slice 2 (API): \u5be6\u4f5c <code>GET /mkt/candles</code>\uff0c\u652f\u63f4 Timeframe \u53c3\u6578 Pagination\u3002</li> <li> <p>[ ] Slice 3 (Logic): \u4f7f\u7528 Polars \u8b80\u53d6 Parquet (Hive Partition) \u4e26\u9032\u884c\u9ad8\u6548 Resample (\u5982 1m \u8f49 4h)\u3002</p> </li> <li> <p>[ ] ETL \u8207\u5132\u5b58\u512a\u5316 (Backend Optimization):</p> </li> <li>[ ] Binance Vision: \u5be6\u4f5c Bulk Data \u4e0b\u8f09\u5668\uff0c\u7528\u65bc\u5feb\u901f\u7372\u53d6\u6b77\u53f2\u51b7\u6578\u64da\u3002</li> <li>[ ] Data Governance: \u5be6\u4f5c Raw Data \u6b78\u6a94\u6a5f\u5236\uff0c\u78ba\u4fdd\u539f\u59cb\u6578\u64da\u7684\u6301\u4e45\u5316\u4fdd\u5b58\u3002</li> <li>[ ] Performance: \u5efa\u7acb <code>parquet_cold</code> Hive Partitioning \u7d50\u69cb\u4e26\u9a57\u8b49\u8b80\u53d6\u6548\u80fd\u3002</li> <li>[ ] Automation: \u5efa\u7acb\u5b9a\u671f\u4efb\u52d9 (\u53ef\u4f7f\u7528 Celery \u6216\u7c21\u55ae\u7684 Cron)\uff0c\u5c07\u539f\u59cb\u6578\u64da\u6e05\u6d17\uff0c\u4e26\u8f49\u5b58\u70ba Parquet\u3002</li> </ul>"},{"location":"ROADMAP/#phase-12-auth-rbac","title":"Phase 1.2: \u8eab\u4efd\u8207\u6b0a\u9650\u7ba1\u7406 (Auth &amp; RBAC)","text":"<p>\u76ee\u6a19\uff1a\u5be6\u4f5c\u4f7f\u7528\u8005\u767b\u5165\u8207\u89d2\u8272\u6b0a\u9650\u5340\u5206\uff0c\u78ba\u4fdd <code>MANUAL.md</code> \u4e2d\u5b9a\u7fa9\u7684\u300c\u7ba1\u7406\u54e1\u300d\u8207\u300c\u4ea4\u6613\u54e1\u300d\u6b0a\u9650\u5f97\u5230\u7cfb\u7d71\u5f37\u5236\u57f7\u884c\u3002</p> <p>[AI \u63d0\u793a / AI Instructions] \u6b64\u968e\u6bb5\u4efb\u52d9\u63a1\u300c\u6574\u5408\u300d\u6a21\u5f0f\uff0c\u958b\u767c\u6642\u53ef\u5148\u4f7f\u7528 Mock Provider\uff0c\u4f46\u4ecb\u9762\u9700\u9810\u7559 OIDC \u6d41\u7a0b</p> <ul> <li>[ ] SSO \u767b\u5165\u6d41\u7a0b (SSO Authentication):</li> <li>[ ] Slice 1: UI: \u5efa\u7acb\u767b\u5165\u9801\u9762\uff0c\u5be6\u4f5c\u300c\u524d\u5f80\u767b\u5165 (Login with SSO)\u300d\u6309\u9215\u8207 OAuth2 Redirect \u908f\u8f2f\u3002</li> <li>[ ] Slice 2: API: \u5be6\u4f5c <code>/auth/callback</code> \u6216 Token \u9a57\u8b49\u63a5\u53e3\uff0c\u63a5\u6536\u5916\u90e8 IAM \u767c\u51fa\u7684 JWT (ID Token/Access Token)\u3002</li> <li> <p>[ ] Slice 3: Logic (Mock): \u5728\u5916\u90e8 IAM \u5c1a\u672a\u5c31\u7dd2\u524d\uff0c\u8a2d\u8a08\u4e00\u500b <code>MockAuthProvider</code>\uff0c\u6a21\u64ec\u56de\u50b3\u6a19\u6e96 JWT\uff0c\u78ba\u4fdd\u958b\u767c\u4e0d\u88ab\u963b\u585e\u3002</p> </li> <li> <p>[ ] \u4f7f\u7528\u8005\u6620\u5c04\u8207\u6b0a\u9650 (User Provisioning &amp; RBAC):</p> </li> <li>[ ] Slice 1: Schema: \u8a2d\u8a08\u672c\u5730 <code>UserExtension</code> \u6a21\u578b\uff0c\u7528\u65bc\u5132\u5b58\u5916\u90e8 User ID (UUID) \u8207\u672c\u5730\u89d2\u8272 (Trader/Admin) \u7684\u5c0d\u7167\u95dc\u4fc2\u3002</li> <li>[ ] Slice 2: Logic: \u5be6\u4f5c\u300c\u81ea\u52d5\u958b\u901a (Auto-provisioning)\u300d\u908f\u8f2f\u2014\u2014\u7576\u65b0\u4f7f\u7528\u8005\u9996\u6b21 SSO \u767b\u5165\u6642\uff0c\u81ea\u52d5\u5728\u672c\u5730\u5efa\u7acb\u5e33\u865f\u4e26\u7d66\u4e88\u9810\u8a2d\u6b0a\u9650\u3002</li> <li>[ ] Slice 3: Guard: \u5be6\u4f5c Django Ninja <code>Auth</code> Dependency \u8207 SvelteKit <code>hooks</code>\uff0c\u89e3\u6790 JWT \u4e26\u8b80\u53d6\u672c\u5730\u6b0a\u9650\u8868\u9032\u884c\u8def\u7531\u4fdd\u8b77\u3002</li> </ul>"},{"location":"ROADMAP/#phase-15-frontend-infrastructure","title":"Phase 1.5: \u524d\u7aef\u790e\u5efa\u8a2d (Frontend Infrastructure)","text":"<ul> <li>[ ] App Shell \u4f48\u5c40\u5be6\u4f5c:</li> <li>[x] \u5f15\u5165 Shadcn Sidebar (SidebarProvider, SidebarRoot, ...)\u3002</li> <li>[x] \u5be6\u4f5c\u97ff\u61c9\u5f0f\u4f48\u5c40: Sidebar (Rail) + Header + Status Bar\u3002</li> <li>[ ] \u6574\u5408 Shadcn <code>Dark Mode</code>\uff0c\u9069\u61c9\u9577\u6642\u9593\u770b\u76e4\u9700\u6c42\u3002</li> <li>[ ] \u672a\u4f86\u898f\u5283: \u65bc\u91cf\u5316\u56de\u6e2c\u9801\u9762 (<code>/backtest</code>) \u5f15\u5165 Resizable Panel \u4ee5\u652f\u63f4\u81ea\u7531\u8abf\u6574\u9762\u677f\u5927\u5c0f\u3002</li> </ul>"},{"location":"ROADMAP/#phase-2-backtesting-engine","title":"Phase 2: \u7b56\u7565\u56de\u6e2c\u5f15\u64ce (Backtesting Engine)","text":"<p>\u76ee\u6a19\uff1a\u9a57\u8b49\u4ea4\u6613\u8f2f\u7684\u7372\u5229\u80fd\u529b\u3002\u6b64\u70ba <code>analysis</code> \u6a21\u7d44\u7684\u6838\u5fc3\u3002</p> <ul> <li>[ ] \u6307\u6a19\u5eab (Indicator Lib): \u5c01\u88dd Polars/Pandas-TA \u9ad8\u6548\u8a08\u7b97\u6a21\u7d44\u3002</li> <li>[ ] \u5411\u91cf\u5316\u56de\u6e2c (Vectorized Backtest): \u5229\u7528 Polars \u7684\u6975\u901f\u7279\u6027\uff0c\u91dd\u5c0d\u6b77\u53f2\u6578\u64da\u9032\u884c\u5168\u91cf\u56de\u6e2c (\u4e0d\u8003\u91cf\u6ed1\u9ede\u8207\u8a73\u7d30\u6413\u5408)\uff0c\u5feb\u901f\u7be9\u9078\u7b56\u7565\u3002</li> <li>[ ] \u56de\u6e2c\u5831\u544a (Report): \u5728\u524d\u7aef\u986f\u793a\u6b0a\u76ca\u66f2\u7dda (Equity Curve)\u3001\u6700\u5927\u56de\u64a4 (MOD)\u3001\u590f\u666e\u6bd4\u7387 (Sharpe Ratio)\u3002</li> </ul>"},{"location":"ROADMAP/#phase-3-paper-trading-event-loop","title":"Phase 3: \u6a21\u64ec\u4ea4\u6613\u8207\u4e8b\u4ef6\u9a45\u52d5 (Paper Trading &amp; Event Loop)","text":"<p>\u76ee\u6a19\uff1a\u5f9e\u300c\u975c\u614b\u5206\u6790\u300d\u8f49\u5411\u300c\u52d5\u614b\u4ea4\u6613\u300d\uff0c\u4f46\u4e0d\u6d89\u53ca\u5be6\u969b\u4ea4\u6613\u3002\u5f9e\u6b64\u958b\u59cb\u9032\u5165 <code>trading</code> \u6a21\u7d44\u3002</p> <ul> <li>[ ] \u6a21\u64ec\u4ea4\u6613\u6240 (Paper Exchange): \u6a21\u64ec\u8a02\u55ae\u6413\u5408\u3001\u6ed1\u9ede\u8207\u624b\u7e8c\u8cbb\u3002</li> <li>[ ] \u4e8b\u4ef6\u9a45\u52d5\u5f15\u64ce (Event-Driven Engine): \u8655\u7406 WebSocket \u5373\u6642\u5831\u50f9 (Tick-by-tick)\u3002   \u9019\u8207 Phase 2 \u7684\u5411\u91cf\u5316\u56de\u6e2c\u4e0d\u540c\uff0c\u9019\u662f\u9010\u7b46 (Tick-by-tick) \u6216\u9010\u6839 K \u7dda (Bar-by-bar) \u7684\u8655\u7406\u3002</li> <li>[ ] \u5373\u6642\u76e3\u63a7\u5100\u8868\u677f (Dashboard): SvelteKit \u900f\u904e SSE (Server-Sent Events) \u6216 WebSocket \u986f\u793a\u5373\u6642\u5831\u50f9\u8207\u6a21\u64ec\u55ae\u72c0\u614b\u3002</li> </ul>"},{"location":"ROADMAP/#phase-4-live-trading","title":"Phase 4: \u5be6\u76e4\u81ea\u52d5\u4ea4\u6613 (Live Trading)","text":"<p>\u76ee\u6a19\uff1a\u4e32\u63a5\u4ea4\u6613\u6240 API \u9032\u884c\u771f\u5be6\u4e0b\u55ae\u3002</p> <ul> <li>[ ] API Key \u7ba1\u7406\u8207\u5b89\u5168: \u78ba\u4fdd API Key \u52a0\u5bc6\u5132\u5b58\u3002</li> <li>[ ] \u57f7\u884c\u8def\u7531\u5668 (Execution Router): \u6839\u64da\u4fe1\u865f\u767c\u9001\u771f\u5be6\u8a02\u55ae (Market/Limit/Stop)\u3002</li> <li>[ ] \u98a8\u96aa\u63a7\u5236\u6a21\u7d44 (Risk Management): \u9019\u662f\u6700\u91cd\u8981\u90e8\u5206\u3002\u5728\u767c\u9001\u8a02\u55ae\u524d\u5f37\u5236\u6aa2\u67e5\u3002</li> <li>[ ] \u55ae\u7b46\u8667\u640d\u4e0d\u8d85\u904e\u7e3d\u8cc7\u7522 2%</li> <li>[ ] \u6bcf\u65e5\u6700\u5927\u8667\u640d\u505c\u6b62\u4ea4\u6613</li> <li>[ ] Kill Switch</li> <li>[ ] Line/Discord \u901a\u77e5: \u4ea4\u6613\u767c\u751f\u6642\u63a8\u64ad\u901a\u77e5\u5230\u624b\u6a5f\u3002</li> </ul>"},{"location":"ROADMAP/#phase-5-ai-expansion-ai-training","title":"Phase 5: \u64f4\u5c55\u8207 AI \u5b78\u7fd2 (Expansion &amp; AI Training)","text":"<p>\u76ee\u6a19\uff1a\u5f15\u5165\u6a5f\u5668\u5b78\u7fd2\u8207\u50b3\u7d71\u91d1\u878d\u5206\u6790\u8207\u4ea4\u6613\u3002\u900f\u904e\u5df2\u5efa\u7acb\u597d\u7684\u53ef\u64f4\u5c55\u67b6\u69cb\uff0c\u4f7f\u7cfb\u7d71\u4e5f\u53ef\u4ee5\u9032\u884c\u50b3\u7d71\u91d1\u878d (\u80a1\u7968) \u5206\u6790\u8207\u4ea4\u6613\u3002</p> <ul> <li>[ ] \u50b3\u7d71\u91d1\u878d: \u64f4\u5145 Exchange \u4ecb\u9762\u4ee5\u652f\u63f4 IBKR (Interactive Brokers) \u6216 Alpaca\u3002\u9700\u8655\u7406\u300c\u4f11\u5e02\u6642\u9593\u300d\u8207\u300c\u9664\u6b0a\u606f\u300d\u7b49\u52a0\u5bc6\u8ca8\u5e63\u6c92\u6709\u7684\u554f\u984c\u3002</li> <li>[ ] AI \u6a21\u7d44: \u6a5f\u5668\u5b78\u7fd2: \u5229\u7528\u5df2\u6536\u96c6\u7684 Parquet \u6578\u64da\u8a13\u7df4\u6a21\u578b (LSTM, Transformer)\uff0c\u4f5c\u70ba\u7b56\u7565\u7684\u904e\u6ffe\u5668 (Filter) \u6216\u8a0a\u865f\u70ba (Signal)</li> </ul>"}]}